<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <!-- <meta name="viewport" content="initial-scale=1.0, user-scalable=no"> -->
    <link rel="icon" href="<%= BASE_URL %>favicon.ico" />
    <title> </title>
    <link rel="stylesheet" href="./base.css" />
    <link
      rel="stylesheet"
      href="./font-awesome-4.7.0/css/font-awesome.min.css"
    />
    <style>
      html,
      body {
        width: 100%;
        height: 100%;
      }
    </style>
    <script type="text/javascript">
      window._AMapSecurityConfig = {
        serviceHost: "https://xxth5.ruyuechuxing.com/_AMapService",
      };
    </script>

    <script src="https://webapi.amap.com/loader.js"></script>
    <script
      type="text/javascript"
      src="https://webapi.amap.com/maps?v=1.4.15&key=12600f747918d6872abb4aaa7ed38b6f"
    ></script>
    <script
      type="text/javascript"
      src="https://webapi.amap.com/ui/1.0/main.js"
    ></script>
    <script type="text/javascript" src="./jquery-3.1.1.min.js"></script>
    <script type="text/javascript" src="./common.js"></script>
    <!-- <script type="text/javascript" src="http://res.wx.qq.com/open/js/jweixin-1.6.0.js"></script> -->
    <!--            <script type="text/javascript" src="./libxxtenc_v1_loc.js"></script>-->
    <script type="text/javascript" src="./libxxtenc_v1_pro.js"></script>
    <!-- <script type="text/javascript" src="./libxxtenc_v1_test.js"></script> -->
    <!-- <script type="text/javascript" src="./xxt.js"></script> -->
    <script>
      function encode_xxt(reqpara, reqtime, searchQuery, searchBody) {
        var ptr_reqpara = _malloc(1024 * 50);
        var ptr_reqtime = _malloc(30);
        var ptr_searchQuery = searchQuery ? _malloc(1024 * 20) : 0;
        var ptr_searchBody = searchBody ? _malloc(1024 * 200) : 0;
        stringToUTF8(reqpara, ptr_reqpara, 1024 * 50);
        stringToUTF8(reqtime, ptr_reqtime, 1024 * 50);
        if (ptr_searchQuery != 0)
          stringToUTF8(searchQuery, ptr_searchQuery, 1024 * 50);
        if (ptr_searchBody != 0)
          stringToUTF8(searchBody, ptr_searchBody, 1024 * 50);
        var str = Pointer_stringify(
          _SHA_MD5(ptr_reqpara, ptr_reqtime, ptr_searchQuery, ptr_searchBody)
        );
        _free(ptr_reqpara);
        _free(ptr_reqtime);
        if (ptr_searchQuery != 0) _free(ptr_searchQuery);
        if (ptr_searchBody != 0) _free(ptr_searchBody);
        return str;
      }

      Module.onRuntimeInitialized = function() {
        window.signSuccess = true;
      };

      /**
       *对Date的扩展，将 Date 转化为指定格式的String
       *月(M)、日(d)、小时(h)、分(m)、秒(s)、季度(q) 可以用 1-2 个占位符，
       *年(y)可以用 1-4 个占位符，毫秒(S)只能用 1 个占位符(是 1-3 位的数字)
       *例子：
       *(new Date()).Format("yyyy-MM-dd hh:mm:ss.S") ==> 2006-07-02 08:09:04.423
       *(new Date()).Format("yyyy-M-d h:m:s.S")      ==> 2006-7-2 8:9:4.18
       */
      Date.prototype.format = function(fmt) {
        var o = {
          "M+": this.getMonth() + 1, //月份
          "d+": this.getDate(), //日
          "h+": this.getHours(), //小时
          "m+": this.getMinutes(), //分
          "s+": this.getSeconds(), //秒
          "q+": Math.floor((this.getMonth() + 3) / 3), //季度
          S: this.getMilliseconds(), //毫秒
        };
        if (/(y+)/.test(fmt))
          fmt = fmt.replace(
            RegExp.$1,
            (this.getFullYear() + "").substr(4 - RegExp.$1.length)
          );
        for (var k in o)
          if (new RegExp("(" + k + ")").test(fmt))
            fmt = fmt.replace(
              RegExp.$1,
              RegExp.$1.length == 1
                ? o[k]
                : ("00" + o[k]).substr(("" + o[k]).length)
            );
        return fmt;
      };
    </script>
  </head>

  <body>
    <noscript>
      <strong
        >We're sorry but bus-search doesn't work properly without JavaScript
        enabled. Please enable it to continue.</strong
      >
    </noscript>
    <div id="app"></div>
    <!-- built files will be auto injected -->
  </body>
</html>
